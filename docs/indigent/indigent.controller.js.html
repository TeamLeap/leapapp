<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width" charset="utf-8">
    <title>My Project</title>
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/cayman.min.css">
    <link rel="stylesheet" href="../css/prism.min.css">
    <link rel="stylesheet" href="../css/index.min.css">
    <link rel="stylesheet" href="../css/docs.min.css">
    <link rel="stylesheet" href="../css/bootstrap-responsive.min.css">
  </head>
  <body data-spy="scroll" data-target=".scrollspy">
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container"><a class="brand">Mr. Doc</a>
          <div class="nav-collapse collapse">
            <ul class="nav pull-right sponsored"></ul>
          </div>
        </div>
      </div>
    </div>
    <header id="overview" class="jumbotron subhead">
      <div class="container">
        <h1>My Project</h1>
        <p class="lead"></p>
      </div>
    </header>
    <div class="container">
      <div class="row">
        <div class="span3 bs-docs-sidebar">
          <ul class="nav nav-list bs-docs-sidenav affix-top">
            <li><a href="../index.html">Main</a></li>
            <li><a href="../bower_components/Chart.js.html">bower_components/Chart.js</a></li>
            <li><a href="../bower_components/Chart.js/dist/Chart.bundle.js.html">bower_components/Chart.js/dist/Chart.bundle.js</a></li>
            <li><a href="../bower_components/Chart.js/dist/Chart.bundle.min.js.html">bower_components/Chart.js/dist/Chart.bundle.min.js</a></li>
            <li><a href="../bower_components/Chart.js/dist/Chart.js.html">bower_components/Chart.js/dist/Chart.js</a></li>
            <li><a href="../bower_components/Chart.js/dist/Chart.min.js.html">bower_components/Chart.js/dist/Chart.min.js</a></li>
            <li><a href="../bower_components/Chart.js/gulpfile.js.html">bower_components/Chart.js/gulpfile.js</a></li>
            <li><a href="../bower_components/Chart.js/karma.conf.ci.js.html">bower_components/Chart.js/karma.conf.ci.js</a></li>
            <li><a href="../bower_components/Chart.js/karma.conf.js.html">bower_components/Chart.js/karma.conf.js</a></li>
            <li><a href="../bower_components/Chart.js/karma.coverage.conf.js.html">bower_components/Chart.js/karma.coverage.conf.js</a></li>
            <li><a href="../bower_components/Chart.js/src/chart.js.html">bower_components/Chart.js/src/chart.js</a></li>
            <li><a href="../bower_components/Chart.js/src/charts/Chart.Bar.js.html">bower_components/Chart.js/src/charts/Chart.Bar.js</a></li>
            <li><a href="../bower_components/Chart.js/src/charts/Chart.Bubble.js.html">bower_components/Chart.js/src/charts/Chart.Bubble.js</a></li>
            <li><a href="../bower_components/Chart.js/src/charts/Chart.Doughnut.js.html">bower_components/Chart.js/src/charts/Chart.Doughnut.js</a></li>
            <li><a href="../bower_components/Chart.js/src/charts/Chart.Line.js.html">bower_components/Chart.js/src/charts/Chart.Line.js</a></li>
            <li><a href="../bower_components/Chart.js/src/charts/Chart.PolarArea.js.html">bower_components/Chart.js/src/charts/Chart.PolarArea.js</a></li>
            <li><a href="../bower_components/Chart.js/src/charts/Chart.Radar.js.html">bower_components/Chart.js/src/charts/Chart.Radar.js</a></li>
            <li><a href="../bower_components/Chart.js/src/charts/Chart.Scatter.js.html">bower_components/Chart.js/src/charts/Chart.Scatter.js</a></li>
            <li><a href="../bower_components/Chart.js/src/controllers/controller.bar.js.html">bower_components/Chart.js/src/controllers/controller.bar.js</a></li>
            <li><a href="../bower_components/Chart.js/src/controllers/controller.bubble.js.html">bower_components/Chart.js/src/controllers/controller.bubble.js</a></li>
            <li><a href="../bower_components/Chart.js/src/controllers/controller.doughnut.js.html">bower_components/Chart.js/src/controllers/controller.doughnut.js</a></li>
            <li><a href="../bower_components/Chart.js/src/controllers/controller.line.js.html">bower_components/Chart.js/src/controllers/controller.line.js</a></li>
            <li><a href="../bower_components/Chart.js/src/controllers/controller.polarArea.js.html">bower_components/Chart.js/src/controllers/controller.polarArea.js</a></li>
            <li><a href="../bower_components/Chart.js/src/controllers/controller.radar.js.html">bower_components/Chart.js/src/controllers/controller.radar.js</a></li>
            <li><a href="../bower_components/Chart.js/src/core/core.animation.js.html">bower_components/Chart.js/src/core/core.animation.js</a></li>
            <li><a href="../bower_components/Chart.js/src/core/core.controller.js.html">bower_components/Chart.js/src/core/core.controller.js</a></li>
            <li><a href="../bower_components/Chart.js/src/core/core.datasetController.js.html">bower_components/Chart.js/src/core/core.datasetController.js</a></li>
            <li><a href="../bower_components/Chart.js/src/core/core.element.js.html">bower_components/Chart.js/src/core/core.element.js</a></li>
            <li><a href="../bower_components/Chart.js/src/core/core.helpers.js.html">bower_components/Chart.js/src/core/core.helpers.js</a></li>
            <li><a href="../bower_components/Chart.js/src/core/core.js.html">bower_components/Chart.js/src/core/core.js</a></li>
            <li><a href="../bower_components/Chart.js/src/core/core.layoutService.js.html">bower_components/Chart.js/src/core/core.layoutService.js</a></li>
            <li><a href="../bower_components/Chart.js/src/core/core.legend.js.html">bower_components/Chart.js/src/core/core.legend.js</a></li>
            <li><a href="../bower_components/Chart.js/src/core/core.plugin.js.html">bower_components/Chart.js/src/core/core.plugin.js</a></li>
            <li><a href="../bower_components/Chart.js/src/core/core.scale.js.html">bower_components/Chart.js/src/core/core.scale.js</a></li>
            <li><a href="../bower_components/Chart.js/src/core/core.scaleService.js.html">bower_components/Chart.js/src/core/core.scaleService.js</a></li>
            <li><a href="../bower_components/Chart.js/src/core/core.title.js.html">bower_components/Chart.js/src/core/core.title.js</a></li>
            <li><a href="../bower_components/Chart.js/src/core/core.tooltip.js.html">bower_components/Chart.js/src/core/core.tooltip.js</a></li>
            <li><a href="../bower_components/Chart.js/src/elements/element.arc.js.html">bower_components/Chart.js/src/elements/element.arc.js</a></li>
            <li><a href="../bower_components/Chart.js/src/elements/element.line.js.html">bower_components/Chart.js/src/elements/element.line.js</a></li>
            <li><a href="../bower_components/Chart.js/src/elements/element.point.js.html">bower_components/Chart.js/src/elements/element.point.js</a></li>
            <li><a href="../bower_components/Chart.js/src/elements/element.rectangle.js.html">bower_components/Chart.js/src/elements/element.rectangle.js</a></li>
            <li><a href="../bower_components/Chart.js/src/scales/scale.category.js.html">bower_components/Chart.js/src/scales/scale.category.js</a></li>
            <li><a href="../bower_components/Chart.js/src/scales/scale.linear.js.html">bower_components/Chart.js/src/scales/scale.linear.js</a></li>
            <li><a href="../bower_components/Chart.js/src/scales/scale.logarithmic.js.html">bower_components/Chart.js/src/scales/scale.logarithmic.js</a></li>
            <li><a href="../bower_components/Chart.js/src/scales/scale.radialLinear.js.html">bower_components/Chart.js/src/scales/scale.radialLinear.js</a></li>
            <li><a href="../bower_components/Chart.js/src/scales/scale.time.js.html">bower_components/Chart.js/src/scales/scale.time.js</a></li>
            <li><a href="../bower_components/angular/angular.js.html">bower_components/angular/angular.js</a></li>
            <li><a href="../bower_components/angular/angular.min.js.html">bower_components/angular/angular.min.js</a></li>
            <li><a href="../bower_components/angular/index.js.html">bower_components/angular/index.js</a></li>
            <li><a href="../bower_components/angular-charts/dist/angular-charts.js.html">bower_components/angular-charts/dist/angular-charts.js</a></li>
            <li><a href="../bower_components/angular-charts/dist/angular-charts.min.js.html">bower_components/angular-charts/dist/angular-charts.min.js</a></li>
            <li><a href="../bower_components/angular-nvd3/Gruntfile.js.html">bower_components/angular-nvd3/Gruntfile.js</a></li>
            <li><a href="../bower_components/angular-nvd3/dist/angular-nvd3.js.html">bower_components/angular-nvd3/dist/angular-nvd3.js</a></li>
            <li><a href="../bower_components/angular-nvd3/dist/angular-nvd3.min.js.html">bower_components/angular-nvd3/dist/angular-nvd3.min.js</a></li>
            <li><a href="../bower_components/angular-nvd3/index.js.html">bower_components/angular-nvd3/index.js</a></li>
            <li><a href="../bower_components/d3/d3.js.html">bower_components/d3/d3.js</a></li>
            <li><a href="../bower_components/d3/d3.min.js.html">bower_components/d3/d3.min.js</a></li>
            <li><a href="../bower_components/nvd3/build/nv.d3.js.html">bower_components/nvd3/build/nv.d3.js</a></li>
            <li><a href="../bower_components/nvd3/build/nv.d3.min.js.html">bower_components/nvd3/build/nv.d3.min.js</a></li>
            <li><a href="../bower_components/nvd3/meteor/export.js.html">bower_components/nvd3/meteor/export.js</a></li>
            <li><a href="../bower_components/nvd3/package.js.html">bower_components/nvd3/package.js</a></li>
            <li><a href="../cemetery/cemetery.controller.js.html">cemetery/cemetery.controller.js</a></li>
            <li><a href="../counsellor/counsellor.controller.js.html">counsellor/counsellor.controller.js</a></li>
            <li><a href="../docs/js/bootstrap-affix.min.js.html">docs/js/bootstrap-affix.min.js</a></li>
            <li><a href="../docs/js/bootstrap-collapse.min.js.html">docs/js/bootstrap-collapse.min.js</a></li>
            <li><a href="../docs/js/bootstrap-dropdown.min.js.html">docs/js/bootstrap-dropdown.min.js</a></li>
            <li><a href="../docs/js/bootstrap-scrollspy.min.js.html">docs/js/bootstrap-scrollspy.min.js</a></li>
            <li><a href="../docs/js/bootstrap-transition.min.js.html">docs/js/bootstrap-transition.min.js</a></li>
            <li><a href="../docs/js/index.min.js.html">docs/js/index.min.js</a></li>
            <li><a href="../docs/js/jquery.min.js.html">docs/js/jquery.min.js</a></li>
            <li><a href="../docs/js/prism.min.js.html">docs/js/prism.min.js</a></li>
            <li><a href="../docs/js/twitter-widget.min.js.html">docs/js/twitter-widget.min.js</a></li>
            <li><a href="../efleet/efleet.controller.js.html">efleet/efleet.controller.js</a></li>
            <li><a href="../ehealth/ehealth.controller.js.html">ehealth/ehealth.controller.js</a></li>
            <li><a href="../gulpfile.js.html">gulpfile.js</a></li>
            <li><a href="../hr/hr.controller.js.html">hr/hr.controller.js</a></li>
            <li class="active"><a href="../indigent/indigent.controller.js.html">indigent/indigent.controller.js</a></li>
            <li><a href="../js/app.js.html">js/app.js</a></li>
            <li><a href="../js/config.js.html">js/config.js</a></li>
            <li><a href="../js/map-icons.js.html">js/map-icons.js</a></li>
            <li><a href="../js/ng-cordova.js.html">js/ng-cordova.js</a></li>
            <li><a href="../js/oauth.js.html">js/oauth.js</a></li>
            <li><a href="../js/plugins.js.html">js/plugins.js</a></li>
            <li><a href="../js/ui-bootstrap-tpls-2.1.1.js.html">js/ui-bootstrap-tpls-2.1.1.js</a></li>
            <li><a href="../lib/angular-messages.min.js.html">lib/angular-messages.min.js</a></li>
            <li><a href="../lib/angular-nvd3.js.html">lib/angular-nvd3.js</a></li>
            <li><a href="../lib/angular.soap.js.html">lib/angular.soap.js</a></li>
            <li><a href="../lib/d3.js.html">lib/d3.js</a></li>
            <li><a href="../lib/nv.d3.js.html">lib/nv.d3.js</a></li>
            <li><a href="../lib/onsen/js/angular/angular-animate.js.html">lib/onsen/js/angular/angular-animate.js</a></li>
            <li><a href="../lib/onsen/js/angular/angular-touch.js.html">lib/onsen/js/angular/angular-touch.js</a></li>
            <li><a href="../lib/onsen/js/angular/angular.js.html">lib/onsen/js/angular/angular.js</a></li>
            <li><a href="../lib/onsen/js/angular/angular.min.js.html">lib/onsen/js/angular/angular.min.js</a></li>
            <li><a href="../lib/onsen/js/jquery-3.1.0.min.js.html">lib/onsen/js/jquery-3.1.0.min.js</a></li>
            <li><a href="../lib/onsen/js/onsenui.js.html">lib/onsen/js/onsenui.js</a></li>
            <li><a href="../lib/onsen/js/onsenui.min.js.html">lib/onsen/js/onsenui.min.js</a></li>
            <li><a href="../lib/onsen/js/onsenui_all.js.html">lib/onsen/js/onsenui_all.js</a></li>
            <li><a href="../lib/onsen/js/onsenui_all.min.js.html">lib/onsen/js/onsenui_all.min.js</a></li>
            <li><a href="../lib/signature_pad.js.html">lib/signature_pad.js</a></li>
            <li><a href="../lib/soapclient.js.html">lib/soapclient.js</a></li>
            <li><a href="../lib/swiper.js.html">lib/swiper.js</a></li>
            <li><a href="../providers/services/twitter-provider.js.html">providers/services/twitter-provider.js</a></li>
            <li><a href="../suprema/suprema.controller.js.html">suprema/suprema.controller.js</a></li>
          </ul>
          <div class="scrollspy">
            <ul class="nav nav-list bs-docs-sidenav affix-top">
            </ul>
          </div>
        </div>
        <div class="span9">
          <div class="description"></div>
          <pre><code class="language-javascript">app.controller('indigentController', ['$http', '$scope', '$rootScope', '$sce', 'appConfig', 'loadingMessageService', '$soap', function ($http, $scope, $rootScope, $sce, appConfig, loadingMessageService, $soap) {

       $scope.aggregatedList = [];


       $scope.dialogs = [];
       $scope.declineReason = &quot;&quot;;


       $scope.declineReasonList = [

           {
               &quot;id&quot;: 1,
               &quot;name&quot;: &quot;Incomplete information&quot;
                   },
           {
               &quot;id&quot;: 2,
               &quot;name&quot;: &quot;The house is not indigent&quot;
                   },
           {
               &quot;id&quot;: 3,
               &quot;name&quot;: &quot;Other&quot;
                   }
        ];

       $scope.initIndigent = function () {

           $scope.isFetching = true;
           $rootScope.didYouKnowMessage = loadingMessageService.showMessage();
           modal.show();

           d3.json(appConfig.emmIdigentEndPoint, function (data) {

               //UnEmployed
               var unemployedList = {
                   key: &quot;UnEmployed&quot;,
                   color: &quot;#4f99b4&quot;,
                   values: []
               };

               var i;
               $scope.unEmployedHighValue = 0, $scope.employedHighValue = 0, $scope.childHeadedHighValue = 0;
               $scope.unEmployedHighWard = &quot;&quot;, $scope.employedHighWard = &quot;&quot;, $scope.childHeadedHighWard = &quot;&quot;;

               for (i = 0; i &lt; data.length; i++) {

                   if (parseInt(data[i].unemployed, 10) &gt; $scope.unEmployedHighValue) {
                       $scope.unEmployedHighValue = data[i].unemployed;
                       $scope.unEmployedHighWard = data[i].a_wardNo;
                   }

                   unemployedList.values.push({
                       value: data[i].unemployed,
                       label: data[i].a_wardNo
                   });

               };

               //Employees
               var employedList = {
                   key: &quot;Employed&quot;,
                   color: &quot;#4d4cb9&quot;,
                   values: []
               };

               var i;

               for (i = 0; i &lt; data.length; i++) {

                   if (parseInt(data[i].employed, 10) &gt; $scope.employedHighValue) {
                       $scope.employedHighValue = data[i].employed;
                       $scope.employedHighWard = data[i].a_wardNo;
                   }

                   employedList.values.push({
                       value: data[i].employed,
                       label: data[i].a_wardNo
                   });

               };

               var childHeadedList = {
                   key: &quot;ChildHeaded&quot;,
                   color: &quot;#00FF00&quot;,
                   values: []
               };
               var i;


               for (i = 0; i &lt; data.length; i++) {

                   if (parseInt(data[i].childHeaded, 10) &gt; $scope.childHeadedHighValue) {
                       $scope.childHeadedHighValue = data[i].childHeaded;
                       $scope.childHeadedHighWard = data[i].a_wardNo;
                   }

                   childHeadedList.values.push({
                       value: data[i].childHeaded,
                       label: data[i].a_wardNo
                   });

               };

               $scope.aggregatedList = [unemployedList, employedList, childHeadedList];

               $scope.$apply();


               nv.addGraph(function () {

                   var chart = nv.models.multiBarHorizontalChart()
                       .x(function (d) {
                           return &quot;Ward &quot; + d.label
                       })
                       .y(function (d) {
                           return d.value
                       })
                       .margin({
                           top: 55,
                           right: 5,
                           bottom: 5,
                           left: 55
                       })
                       .showValues(true) //Show bar value next to each bar.
                       //.tooltips(true) //Show tooltips on hover.
                       //.transitionDuration(350)
                       .showControls(false); //Allow user to switch between &quot;Grouped&quot; and &quot;Stacked&quot; mode.

                   chart.yAxis
                       .tickFormat(d3.format(',.2f'));
                   chart.groupSpacing(0);
                   chart.height(1600);

                   d3.select('#chart1 svg')
                       .datum($scope.aggregatedList)
                       .call(chart);

                   nv.utils.windowResize(chart.update);

                   return chart;
               });

               $scope.isFetching = false;
               modal.hide();
           });

       }

       $scope.loadAssigments = function () {

           $scope.isFetching = true;
           $rootScope.didYouKnowMessage = loadingMessageService.showMessage();
           modal.show();

           $scope.API = 'https://munipoiapp.herokuapp.com/api/applications/New';

           console.log($scope.API);

           $http.get($scope.API).success(function (data) {

               $scope.assignmentList = data;

               $scope.isFetching = false;
               modal.hide();

           }).error(function (data, status, headers, config) {

               $scope.isFetching = false;
               modal.hide();

               ons.notification.alert({
                   message: JSON.stringify('Something went wrong'),
                   modifier: 'material'
               });

           });

       }

       $scope.loadClosed = function () {

           $scope.isFetching = true;
           $rootScope.didYouKnowMessage = loadingMessageService.showMessage();
           modal.show();

           $scope.API = 'https://munipoiapp.herokuapp.com/api/applications/Closed';

           console.log($scope.API);

           $http.get($scope.API).success(function (data) {

               $scope.closedList = data;

               $scope.isFetching = false;
               modal.hide();

           }).error(function (data, status, headers, config) {

               $scope.isFetching = false;
               modal.hide();

               ons.notification.alert({
                   message: JSON.stringify('Something went wrong'),
                   modifier: 'material'
               });

           });

       }

       $scope.loadAssigmentDetails = function (index, assignment) {

           $scope.id = assignment._id;
           appNavigator.pushPage('assignmentDetails.html', {
               id: assignment._id,
               applicationRefNo: assignment.indigentApplicationDetails.indigentApplicationHeader.applicationRefNo
           });

       }

       $scope.showAssigmentDetails = function () {

           $scope.isFetching = true;
           $rootScope.didYouKnowMessage = loadingMessageService.showMessage();
           modal.show();

           var page = appNavigator.getCurrentPage();

           $scope.API = 'https://munipoiapp.herokuapp.com/api/assigments/' + page.options.id;

           window.localStorage.setItem(&quot;appId&quot;, page.options.id);

           window.localStorage.setItem(&quot;applicationRefNo&quot;, page.options.applicationRefNo);

           $http.get($scope.API).success(function (data) {

               $scope.assignment = data;

               $scope.isFetching = false;
               modal.hide();

           }).error(function (data, status, headers, config) {

               $scope.isFetching = false;
               modal.hide();

               ons.notification.alert({
                   message: JSON.stringify('Something went wrong'),
                   modifier: 'material'
               });

           });

       }

       $scope.showLivingConditionsDetails = function () {

           $scope.isFetching = true;
           $rootScope.didYouKnowMessage = loadingMessageService.showMessage();
           modal.show();

           var appId = window.localStorage.getItem(&quot;appId&quot;);

           $scope.API = 'https://munipoiapp.herokuapp.com/api/assigments/' + appId;

           console.log($scope.API);

           $http.get($scope.API).success(function (data) {

               $scope.livingConditions = data;

               $scope.isFetching = false;
               modal.hide();

           }).error(function (data, status, headers, config) {

               $scope.isFetching = false;
               modal.hide();

               ons.notification.alert({
                   message: JSON.stringify('Something went wrong'),
                   modifier: 'material'
               });

           });

       }

       $scope.loadLivingConditions = function () {

           appNavigator.pushPage('livingconditions.html', {
               id: $scope.id
           });
       }

       $scope.openCamera = function (selection) {

           var srcType = Camera.PictureSourceType.CAMERA;
           var options = setOptions(srcType);
           var func = createNewFileEntry;

           navigator.camera.getPicture(function cameraSuccess(imageUri) {

               if (selection === 1)
                   $scope.image1 = &quot;data:image/jpeg;base64,&quot; + imageUri;
               else if (selection === 2)
                   $scope.image2 = &quot;data:image/jpeg;base64,&quot; + imageUri;
               else if (selection === 3)
                   $scope.image3 = &quot;data:image/jpeg;base64,&quot; + imageUri;
               else if (selection === 4)
                   $scope.image4 = &quot;data:image/jpeg;base64,&quot; + imageUri;
               else if (selection === 5)
                   $scope.image5 = &quot;data:image/jpeg;base64,&quot; + imageUri;
               else if (selection === 6)
                   $scope.image6 = &quot;data:image/jpeg;base64,&quot; + imageUri;
               
                console.debug(&quot;picture: &quot; + imageUri, &quot;app&quot;);

               //displayImage(imageUri);
               // You may choose to copy the picture, save it somewhere, or upload.
               //func(imageUri);
               
               $scope.$apply();

           }, function cameraError(error) {

               console.debug(&quot;Unable to obtain picture: &quot; + error, &quot;app&quot;);

               ons.notification.alert({
                   message: JSON.stringify('Unable to obtain picture: ' + error),
                   modifier: 'material'
               });

           }, options);
       }

       $scope.loadHouseholds = function () {

           $scope.isFetching = true;
           $rootScope.didYouKnowMessage = loadingMessageService.showMessage();
           modal.show();

           var applicationRefNo = window.localStorage.getItem(&quot;applicationRefNo&quot;);

           $scope.API = 'https://munipoiapp.herokuapp.com/api/assigments/household/' + applicationRefNo;

           console.log($scope.API);

           $http.get($scope.API).success(function (data) {

               $scope.householdList = data[0].indigentApplicationDetails;

               $scope.isFetching = false;
               modal.hide();

           }).error(function (data, status, headers, config) {

               $scope.isFetching = false;
               modal.hide();

               ons.notification.alert({
                   message: JSON.stringify('Something went wrong'),
                   modifier: 'material'
               });

           });

       }

       $scope.viewHouseholdDetails = function (index, household) {

           $scope.household = household;

           appNavigator.pushPage('householdverify.html', {
               householdmember: JSON.stringify(household)
           })
       }

       $scope.loadHouseholdDetails = function () {

           var page = appNavigator.getCurrentPage();

           $scope.household = JSON.parse(page.options.householdmember);
       }

       var signaturePad;

       $scope.loadSignature = function () {

           var canvas = document.getElementById('signatureCanvas');
           signaturePad = new SignaturePad(canvas);
       }

       $scope.saveCanvas = function () {
           var sigImg = signaturePad.toDataURL();
           $scope.signature = sigImg;
       }

       $scope.loadAcceptDialog = function () {

           if (!$scope.dialogs[declineApplicationDialog]) {

               ons.createDialog(declineApplicationDialog, {
                   parentScope: $rootScope
               }).then(function (dialog) {
                   $scope.dialogs[declineApplicationDialog] = dialog;
                   dialog.show();
               });
           } else {
               $scope.dialogs[declineApplicationDialog].show();
           }
           declineApplicationDialog.show();
       }

       $scope.declineButtonDialog = function () {

           declineApplicationDialog.hide();

           $scope.isFetching = true;
           $rootScope.didYouKnowMessage = loadingMessageService.showMessage();
           modal.show();

           var applicationRefNo = window.localStorage.getItem(&quot;applicationRefNo&quot;);

           $scope.API = 'http://196.15.242.146:5555/rest/EMMShared/resources/updateFieldWorkerTaskStatus/{&quot;taskStatus&quot;:&quot;Accepted&quot;,&quot;applicationId&quot;:&quot;' + applicationRefNo + '&quot;,&quot;reasonForRejection&quot;:&quot;' + $scope.declineReason + '&quot;}';

           $http.get($scope.API).success(function (data) {

               appNavigator.pushPage('assigments.html');

               $scope.isFetching = false;
               modal.hide();

           }).error(function (data, status, headers, config) {

               $scope.isFetching = false;
               modal.hide();

               ons.notification.alert({
                   message: JSON.stringify('Something went wrong'),
                   modifier: 'material'
               });

           });

       }

   }]);</code></pre>
        </div>
      </div>
    </div>
    <footer class="footer">
      <div class="container">
        <p>Documentation generated with <a href="https://github.com/mr-doc/mr-doc">Mr. Doc </a> created by <a href="https://twitter.com/FGRibreau" data-show-count="false" class="twitter-follow-button">Francois-Guillaume Ribreau </a></p>
        <p>Mr. Doc is sponsored by <a href="http://bringr.net/?btt" title="Outil d'analyse des rÃ©seaux sociaux" class="bringr">Bringr </a> and <a href="https://redsmin.com/?btt" title="Full Redis GUI" class="redsmin">Redsmin</a></p>
        <p>Theme borrowed from Twitter Bootstrap</p>
      </div>
    </footer>
    <script src="../js/twitter-widget.min.js"></script>
    <script src="../js/jquery.min.js"></script>
    <script src="../js/bootstrap-transition.min.js"></script>
    <script src="../js/bootstrap-scrollspy.min.js"></script>
    <script src="../js/bootstrap-dropdown.min.js"></script>
    <script src="../js/bootstrap-collapse.min.js"></script>
    <script src="../js/bootstrap-affix.min.js"></script>
    <script src="../js/prism.min.js"></script>
    <script src="../js/index.min.js"></script>
  </body>
</html>